Mininet
=======

**Version:**  Mininet 2.3.0

**Prerequisite:** You will need Pandas 1.4.0 or higher

Setup
=====

If you want to run multiple simulations in succession you will need to install mininet on a seperate VM to your Ryu controller.
The installation instructions for mininet can be found [here](http://mininet.org/download/#option-2-native-installation-from-source). 

**Note:** I installed mininet from the source github.

After Installing mininet you will need to ensure your VM's network settings are correct. For VirtualBox follow the steps below:

* Power off the mininet VM
* Go to the VM's Settings
* Go to the ``Network`` tab
* Click on the second ``Adapter`` tab
* Click the box to ``Enable Network Adapter``
* Set ``Attached to: Host-only Adapter``
* Set ``Name: VirtualBox Host-Only Ethernet Adapter``
* Click OK and now your mininet VM is ready to go.


<!-- .. _here: http://mininet.org/download/#option-2-native-installation-from-source -->

Generate Network Metrics
========================

The [generate_metrics.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/generate_metrics.py) script is used to generate and save link bandwidth, delay, and packet loss metrics. There is a CSV file created
for each path in the network (for [example](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/topo_info/2link_topoinfo.csv)). 
Currently this script can only generate metrics for the topology in [three_paths_topo.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/topo_info/).
The scipt will generate a set of metrics for each of the three paths for the desired number of simulations (edit the num_simulations parameter 
to adjust the number of simulations). 

<!-- .. _generate_metrics.py: https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/generate_metrics.py
.. _example: https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/topo_info/2link_topoinfo.csv
.. _three_paths_topo.py: https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/three_path_topo.py
.. _topo_info: https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/topo_info/
.. _IPERF: https://iperf.fr/iperf-doc.php#doc
.. _VLC: https://www.videolan.org/vlc/download-ubuntu.html
.. _qoe_experiments: https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/qoe_experiments.py
.. _range: https://github.com/adam-durning/ryu/blob/0edd42b8f55072cafb77baafd75c02eca8705389/ryu/app/qoe_app/mininet/qoe_experiments.py#L19 -->

Topology Script
===============
The script [three_paths_topo.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/three_path_topo.py) is a mininet script that generates the topology shown below. This script also contains functions for sending UDP packets with the [IPERF](https://iperf.fr/iperf-doc.php#doc) tool and for transmitting a video file with [VLC](https://www.videolan.org/vlc/download-ubuntu.html). The link metrics are passed to this script from [qoe_experiments.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/qoe_experiments.py).

.. image:: topology.png
  :width: 600pt


How to run Simulations
======================

The [qoe_experiments.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/qoe_experiments.py) script is used to start the simulations. The metrics are read from the csv files generated by [generate_metrics.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/generate_metrics.py);
these files are located in the [topo_info](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/topo_info/) directory. Set the upper limit in the [range](https://github.com/adam-durning/ryu/blob/0edd42b8f55072cafb77baafd75c02eca8705389/ryu/app/qoe_app/mininet/qoe_experiments.py#L19) function to the number of experiments you wish to run.

Once you have generated the metrics for the desired number of experiments and have set the range in [qoe_experiments.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/mininet/qoe_experiments.py) to reflect this, you can start the simulations by running the following line of code:

**Note:** You should start the [qoe_routing.py](https://github.com/adam-durning/ryu/blob/development_branch/ryu/app/qoe_app/qoe_routing.py) controller before starting the mininet simulations.

  ```
  $ sudo python3 qoe_experiments.py
  ```
